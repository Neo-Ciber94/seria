"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[632],{8211:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var s=t(3274),r=t(9779);const i={sidebar_position:2},a="Custom Types",o={id:"advance/custom-types",title:"Custom Types",description:"Similar to the global JSON seria allow to pass a replacer and reviver function.",source:"@site/docs/advance/custom-types.md",sourceDirName:"advance",slug:"/advance/custom-types",permalink:"/seria/docs/advance/custom-types",draft:!1,unlisted:!1,editUrl:"https://github.com/Neo-Ciber94/seria/website/docs/docs/advance/custom-types.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Advanced",permalink:"/seria/docs/category/advanced"},next:{title:"How it works?",permalink:"/seria/docs/advance/how-it-works"}},c={},d=[{value:"Example",id:"example",level:2},{value:"Serializing <code>URL</code>",id:"serializing-url",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"custom-types",children:"Custom Types"}),"\n",(0,s.jsxs)(n.p,{children:["Similar to the global ",(0,s.jsx)(n.code,{children:"JSON"})," seria allow to pass a ",(0,s.jsx)(n.code,{children:"replacer"})," and ",(0,s.jsx)(n.code,{children:"reviver"})," function."]}),"\n",(0,s.jsxs)(n.p,{children:["When using a ",(0,s.jsx)(n.code,{children:"stringify"})," function the ",(0,s.jsx)(n.code,{children:"replacer"})," function is called for each value,\nthe replacer take the value to stringify and return a ",(0,s.jsx)(n.code,{children:"string"})," which represents the serialized value or ",(0,s.jsx)(n.code,{children:"undefined"})," to ignore the value."]}),"\n",(0,s.jsxs)(n.p,{children:["For the ",(0,s.jsx)(n.code,{children:"parse"})," operation the ",(0,s.jsx)(n.code,{children:"reviver"})," function is called again for each value and\nshould convert the value converted before to its actual representation, similar to the ",(0,s.jsx)(n.code,{children:"reviver"})," we return ",(0,s.jsx)(n.code,{children:"undefined"})," to ignore the value."]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.h3,{id:"serializing-url",children:["Serializing ",(0,s.jsx)(n.code,{children:"URL"})]}),"\n",(0,s.jsxs)(n.p,{children:["For URL we check if the value is an ",(0,s.jsx)(n.code,{children:"URL"})," and then return a value in the format:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$<tag><data>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This is the format ",(0,s.jsx)(n.code,{children:"seria"})," use to represents any non-serializable value like ",(0,s.jsx)(n.code,{children:"Date"})," and the ",(0,s.jsx)(n.strong,{children:"tag"})," is used to look up the value."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const input = {\n  url: new URL("http://127.0.0.1:3000/seria?hello=world"),\n};\n\nconst json = stringify(input, (val) => {\n  if (val instanceof URL) {\n    return `$1${val.href}`;\n  }\n\n  return undefined;\n});\n'})}),"\n",(0,s.jsxs)(n.p,{children:["For parsing because the serialized value is a ",(0,s.jsx)(n.code,{children:"string"})," we check both, if is a string and\nif contains the tag we used, then we just need to stripped the tag and create the ",(0,s.jsx)(n.code,{children:"URL"})," from the data."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const value: any = parse(json, (val) => {\n  if (typeof val === "string" && val.startsWith("$1")) {\n    return new URL(val.slice(2));\n  }\n\n  return undefined;\n});\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},9779:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(9474);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);